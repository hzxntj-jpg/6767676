services:
  - type: web
    name: inventory-app
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: gunicorn wsgi:app
    autoDeploy: true
    envVars:
      - key: FLASK_SECRET_KEY
        fromSecret: FLASK_SECRET_KEY
      - key: STRIPE_WEBHOOK_SECRET
        fromSecret: STRIPE_WEBHOOK_SECRET
      - key: MERCADOPAGO_ACCESS_TOKEN
        fromSecret: MERCADOPAGO_ACCESS_TOKEN
      - key: SQLALCHEMY_DATABASE_URI
        fromSecret: SQLALCHEMY_DATABASE_URI
    disk:
      name: app-data
      mountPath: /data
      sizeGB: 1
secrets:
  - name: FLASK_SECRET_KEY
    sync: false
  - name: STRIPE_WEBHOOK_SECRET
    sync: false
  - name: MERCADOPAGO_ACCESS_TOKEN
    sync: false
  - name: SQLALCHEMY_DATABASE_URI
    sync: false
